<view class="container">
  <view class="header">
    <text class="title">å¡è¯è¯†åˆ«</text>
    <text class="subtitle">æ”¯æŒèº«ä»½è¯å’Œé“¶è¡Œå¡è¯†åˆ«</text>
  </view>

  <view class="card-type-selector">
    <view class="type-item {{cardType === 'idCard' ? 'active' : ''}}" bindtap="selectCardType" data-type="idCard">
      <view class="icon">ğŸªª</view>
      <text class="type-name">èº«ä»½è¯è¯†åˆ«</text>
    </view>
    <view class="type-item {{cardType === 'bankCard' ? 'active' : ''}}" bindtap="selectCardType" data-type="bankCard">
      <view class="icon">ğŸ’³</view>
      <text class="type-name">é“¶è¡Œå¡è¯†åˆ«</text>
    </view>
  </view>

  <view class="image-container">
    <view class="upload-area" wx:if="{{!imagePath}}" bindtap="chooseImage">
      <view class="upload-icon">ğŸ“·</view>
      <text class="upload-text">ç‚¹å‡»é€‰æ‹©å›¾ç‰‡</text>
      <text class="upload-tip">æ”¯æŒæ‹ç…§æˆ–ä»ç›¸å†Œé€‰æ‹©</text>
    </view>
    <view class="preview-area" wx:else>
      <image class="preview-image" src="{{imagePath}}" mode="aspectFit"></image>
      <view class="image-actions">
        <button class="action-btn" bindtap="chooseImage" size="mini">é‡æ–°é€‰æ‹©</button>
        <button class="action-btn primary" bindtap="recognizeCard" size="mini" loading="{{loading}}">
          {{loading ? 'è¯†åˆ«ä¸­...' : 'å¼€å§‹è¯†åˆ«'}}
        </button>
      </view>
    </view>
  </view>

  <view class="result-container" wx:if="{{result}}">
    <view class="result-header">
      <text class="result-title">è¯†åˆ«ç»“æœ</text>
    </view>
    <view class="result-content">
      <!-- èº«ä»½è¯è¯†åˆ«ç»“æœ -->
      <block wx:if="{{cardType === 'idCard'}}">
        <view class="result-item" wx:if="{{result.Name}}">
          <text class="label">å§“åï¼š</text>
          <text class="value">{{result.Name}}</text>
        </view>
        <view class="result-item" wx:if="{{result.Sex}}">
          <text class="label">æ€§åˆ«ï¼š</text>
          <text class="value">{{result.Sex}}</text>
        </view>
        <view class="result-item" wx:if="{{result.Nation}}">
          <text class="label">æ°‘æ—ï¼š</text>
          <text class="value">{{result.Nation}}</text>
        </view>
        <view class="result-item" wx:if="{{result.Birth}}">
          <text class="label">å‡ºç”Ÿæ—¥æœŸï¼š</text>
          <text class="value">{{result.Birth}}</text>
        </view>
        <view class="result-item" wx:if="{{result.Address}}">
          <text class="label">ä½å€ï¼š</text>
          <text class="value">{{result.Address}}</text>
        </view>
        <view class="result-item" wx:if="{{result.IdNum}}">
          <text class="label">èº«ä»½è¯å·ï¼š</text>
          <text class="value">{{result.IdNum}}</text>
        </view>
        <view class="result-item" wx:if="{{result.Authority}}">
          <text class="label">ç­¾å‘æœºå…³ï¼š</text>
          <text class="value">{{result.Authority}}</text>
        </view>
        <view class="result-item" wx:if="{{result.ValidDate}}">
          <text class="label">æœ‰æ•ˆæœŸé™ï¼š</text>
          <text class="value">{{result.ValidDate}}</text>
        </view>
      </block>

      <!-- é“¶è¡Œå¡è¯†åˆ«ç»“æœ -->
      <block wx:if="{{cardType === 'bankCard'}}">
        <view class="result-item" wx:if="{{result.CardNo}}">
          <text class="label">å¡å·ï¼š</text>
          <text class="value">{{result.CardNo}}</text>
        </view>
        <view class="result-item" wx:if="{{result.BankInfo}}">
          <text class="label">é“¶è¡Œåç§°ï¼š</text>
          <text class="value">{{result.BankInfo}}</text>
        </view>
        <view class="result-item" wx:if="{{result.ValidDate}}">
          <text class="label">æœ‰æ•ˆæœŸï¼š</text>
          <text class="value">{{result.ValidDate}}</text>
        </view>
      </block>
    </view>
  </view>

  <view class="error-container" wx:if="{{error}}">
    <view class="error-icon">âš ï¸</view>
    <text class="error-text">{{error}}</text>
  </view>
</view>
